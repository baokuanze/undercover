var __reflect=this&&this.__reflect||function(e,t,a){e.__class__=t,a?a.push(t):a=[t],e.__types__=e.__types__?a.concat(e.__types__):a},__extends=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},BaseView=function(){function e(e){this.state=egret.MainContext.instance.stage,this.UIStage=e.UIStage,this.BottomUIStage=e.BottomUIStage,this.GameEffect=e.GameEffect,this.TopUIStage=e.TopUIStage}return e}();__reflect(BaseView.prototype,"BaseView");var Manager=function(){function e(e){this.stage=e,this.dataManager=new data.DataManagers,this.controllerManager=new controller.ControllerManager,this.viewManager=new view.ViewManager(this)}return e.prototype.start=function(){GameApp.Manager.dataManager.game_id=Tools.getInstance().getUrlAttribute("game_id"),GameApp.Manager.dataManager.plat_id=Tools.getInstance().getUrlAttribute("plat_id"),GameApp.Manager.dataManager.time=Tools.getInstance().getUrlAttribute("time"),GameApp.Manager.dataManager.sign=Tools.getInstance().getUrlAttribute("sign"),GameApp.Manager.dataManager.ticket_cost=Tools.getInstance().getUrlAttribute("ticket_cost"),this.startGame()},e.prototype.startGame=function(){var e=this;this.controllerManager.loader.preloading(function(){e.controllerManager.start()},this)},e}();__reflect(Manager.prototype,"Manager");var mainUI;!function(e){var t=function(){function e(){}return e.prototype.show=function(){GameApp.Manager.viewManager.gameMainManager.show()},e.prototype.hide=function(){GameApp.Manager.viewManager.gameMainManager.hide()},e}();e.gameMainController=t,__reflect(t.prototype,"mainUI.gameMainController")}(mainUI||(mainUI={}));var gameOver;!function(e){var t=function(){function e(){}return e.prototype.show=function(e,t,a,o,i){GameApp.Manager.viewManager.gameOverUiManager.show(e,t,a,o,i)},e.prototype.hide=function(){GameApp.Manager.viewManager.gameOverUiManager.hide()},e}();e.GameOverControll=t,__reflect(t.prototype,"gameOver.GameOverControll")}(gameOver||(gameOver={}));var lookInfo;!function(e){var t=function(){function e(){}return e.prototype.show=function(e,t,a,o,i){GameApp.Manager.viewManager.lookInfoManager.show(e,t,a,o,i)},e.prototype.hide=function(){GameApp.Manager.viewManager.lookInfoManager.hide()},e}();e.LookInfoControll=t,__reflect(t.prototype,"lookInfo.LookInfoControll")}(lookInfo||(lookInfo={}));var loader;!function(e){var t=function(){function e(){this._progress=null,this._complete=null}return e.prototype.preloading=function(e,t){this.scope=t,this.startLoading(["preload"],null,e)},e.prototype.mainLoading=function(e,t,a){this.scope=a;for(var o=0,i=0;i<e.length;i++)RES.loadGroup(e[i],i),RES.isGroupLoaded[e[i]]||o++;o>0?(GameApp.Manager.viewManager.loading.show(),this.startLoading(e,function(e){GameApp.Manager.viewManager.loading.setProgress(e)},function(){t.call(a)})):t.call(a)},e.prototype.startLoading=function(e,t,a){this.loadingGrops=e,this._progress=t,this._complete=a,this.onConfigComplete(null)},e.prototype.onConfigComplete=function(e){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this);for(var t=0;t<this.loadingGrops.length;t++)RES.loadGroup(this.loadingGrops[t],this.loadingGrops.length-t)},e.prototype.onResourceLoadComplete=function(e){e.groupName==this.loadingGrops[this.loadingGrops.length-1]&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this._complete&&this._complete.call(this.scope?this.scope:this,e))},e.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},e.prototype.onResourceProgress=function(e){this._progress&&this._progress(e)},e}();e.LoaderManagers=t,__reflect(t.prototype,"loader.LoaderManagers")}(loader||(loader={}));var Util=function(){function e(){}return e.sendJson1=function(e,t,a,o,i,n){void 0===o&&(o=!0),void 0===n&&(n=!0);var r=new controller.util.BaseURLLoader;r.sendJsonp(e,"callback",t,a,i)},e.sendJsonp=function(e,t,a,o){var i=new controller.util.BaseURLLoader;i.sendJsonp(e,"callback",t,a,o)},e}();__reflect(Util.prototype,"Util");var controller;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.ismask=!0,t.dataFormat=egret.URLLoaderDataFormat.TEXT,t}return __extends(t,e),t.prototype.load_COMPLETE=function(e){this.removeEventListener(egret.Event.COMPLETE,this.load_COMPLETE,this);var t=this.data,a=JSON.parse(t.toString());this.yu?this.callback.call(this.yu,a):this.callback(a),this.callback=null,this.yu=null},t.prototype.sendJson=function(e,t,a,o,i,n){void 0===o&&(o=!0),void 0===n&&(n=!0),this.ismask=n,n&&(this.yu=i),this.callback=a;var r="";if(t){for(var s in t)r+=s+"="+t[s]+"&";r.length>0&&(r=r.substring(0,r.length-1))}this.addEventListener(egret.Event.COMPLETE,this.load_COMPLETE,this);var l=new egret.URLRequest(e);l.method=egret.URLRequestMethod.GET,l.data=new egret.URLVariables(r),this.load(l)},t.prototype.sendJsonp=function(e,t,a,o,i){this.yu=i,this.callback=o;var n="";if(a){for(var r in a)n+=r+"="+a[r]+"&";n.length>0&&(n="&"+n.substring(0,n.length-1))}var s=new egret.URLRequest(e+"?"+t+"=");s.method=egret.URLRequestMethod.POST,this._request=s,JsonpReq.process(this,n),this.addEventListener(egret.Event.COMPLETE,this.load_COMPLETE1,this)},t.prototype.load_COMPLETE1=function(e){e.stopPropagation(),console.log("返回jsonp"),this.removeEventListener(egret.Event.COMPLETE,this.load_COMPLETE1,this);var t=this.data;console.log("返  54回jsonp:"+t.st),this.yu?this.callback.call(this.yu,t):this.callback(t),this.yu=null,this.callback=null},t.prototype.onPostProgress=function(e){console.log("get progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},t.prototype.onGetIOError=function(e){console.log("get error : "+e)},t}(egret.URLLoader);e.BaseURLLoader=t,__reflect(t.prototype,"controller.util.BaseURLLoader")}(t=e.util||(e.util={}))}(controller||(controller={}));var data;!function(e){var t=function(){function e(){this.version="",this.game_id="",this.plat_id="",this.time=null,this.sign="",this.ticket_cost=null,this.room_id="",this.descriptionTime=30,this.voteTime=20,this.voteResultTime=5,this.gameOverAccountsTime=10,this.assigningWordsTime=3,this.spacialVoteTime=20,this.specialWordTime=3,this.stateNextGameTime=8,this.readyCutDownTime=20,this.commonSendWordsTime=30,this.isCanVote=!0,this.imgUrl="http://ga.igaame.com:8099/disk",this.allCity={0:"未知地区",1:"北京",2:"上海",3:"天津",4:"重庆",5:"阿克苏",6:"安宁",7:"安庆",8:"鞍山",9:"安顺",10:"安阳",11:"白城",12:"白山",13:"白银",14:"蚌埠",15:"保定",16:"宝鸡",17:"保山",18:"巴中",19:"北海",20:"本溪",21:"滨州",22:"博乐",23:"亳州",24:"沧州",25:"常德",26:"昌吉",27:"常熟",28:"常州",29:"巢湖",30:"朝阳",31:"潮州",32:"承德",33:"成都",34:"城固",35:"郴州",36:"赤壁",37:"赤峰",38:"赤水",39:"池州",40:"崇左",41:"楚雄",42:"滁州",43:"慈溪",44:"从化",45:"大理",46:"大连",47:"丹东",48:"丹阳",49:"大庆",50:"大同",51:"达州",52:"德阳",53:"德州",54:"东莞",55:"东阳",56:"东营",57:"都匀",58:"敦化",59:"鄂尔多斯",60:"恩施",61:"防城港",62:"肥城",63:"奉化",64:"抚顺",65:"阜新",66:"阜阳",67:"富阳",68:"福州",69:"抚州",70:"赣榆",71:"赣州",72:"高明",73:"高邮",74:"格尔木",75:"个旧",76:"巩义",77:"广安",78:"广元",79:"广州",80:"古包头",81:"贵港",82:"桂林",83:"贵阳",84:"固原",85:"哈尔滨",86:"海城",87:"海口",88:"海门",89:"海宁",90:"哈密",91:"邯郸",92:"杭州",93:"汉中",94:"鹤壁",95:"合肥",96:"衡水",97:"衡阳",98:"和田",99:"河源",100:"菏泽",101:"花都",102:"淮安",103:"淮北",104:"怀化",105:"淮南",106:"黄冈",107:"黄山",108:"黄石",109:"呼和浩特",110:"惠州",111:"葫芦岛",112:"湖州",113:"佳木斯",114:"吉安",115:"江都",116:"江门",117:"江阴",118:"胶南",119:"胶州",120:"焦作",121:"嘉善",122:"嘉兴",123:"介休",124:"吉林",125:"即墨",126:"济南",127:"晋城",128:"景德镇",129:"景洪",130:"靖江",131:"荆门",132:"荆州",133:"金华",134:"集宁",135:"济宁",136:"晋江",137:"金坛",138:"晋中",139:"锦州",140:"吉首",141:"九江",142:"酒泉",143:"鸡西",144:"济源",145:"句容",146:"开封",147:"凯里",148:"开平",149:"开远",150:"喀什",151:"克拉玛依",152:"库尔勒",153:"奎屯",154:"昆明",155:"昆山",156:"来宾",157:"莱芜",158:"莱西",159:"莱州",160:"廊坊",161:"兰州",162:"拉萨",163:"乐山",164:"连云港",165:"聊城",166:"辽阳",167:"辽源",168:"丽江",169:"临安",170:"临沧",171:"临汾",172:"灵宝",173:"临河",174:"临夏",175:"临沂",176:"丽水",177:"六安",178:"六盘水",179:"柳州",180:"溧阳",181:"龙海",182:"龙岩",183:"娄底",184:"漯河",185:"洛阳",186:"潞西",187:"泸州",188:"吕梁",189:"旅顺",190:"马鞍山",191:"茂名",192:"梅河口",193:"眉山",194:"梅州",195:"勉县",196:"绵阳",197:"牡丹江",198:"南安",199:"南昌",200:"南充",201:"南京",202:"南宁",203:"南平",204:"南通",205:"南阳",206:"内江",207:"宁波",208:"宁德",209:"盘锦",210:"攀枝花",211:"蓬莱",212:"平顶山",213:"平度",214:"平湖",215:"平凉",216:"萍乡",217:"普兰店",218:"普宁",219:"莆田",220:"濮阳",221:"黔南",222:"启东",223:"青岛",224:"庆阳",225:"清远",226:"青州",227:"秦皇岛",228:"钦州",229:"琼海",230:"齐齐哈尔",231:"泉州",232:"曲靖",233:"衢州",234:"日喀则",235:"日照",236:"荣成",237:"如皋",238:"瑞安",239:"乳山",240:"三门峡",241:"三明",242:"三亚",243:"厦门",244:"佛山",245:"商洛",246:"商丘",247:"上饶",248:"上虞",249:"汕头",250:"安康",251:"韶关",252:"绍兴",253:"邵阳",254:"沈阳",255:"深圳",256:"石河子",257:"石家庄",258:"石林",259:"石狮",260:"十堰",261:"寿光",262:"双鸭山",263:"朔州",264:"沭阳",265:"思茅",266:"四平",267:"松原",268:"遂宁",269:"随州",270:"苏州",271:"塔城",272:"泰安",273:"太仓",274:"泰兴",275:"太原",276:"泰州",277:"台州",278:"唐山",279:"腾冲",280:"滕州",281:"天门",282:"天水",283:"铁岭",284:"铜川",285:"通辽",286:"铜陵",287:"桐庐",288:"铜仁",289:"桐乡",290:"通州",291:"通化",292:"吐鲁番",293:"瓦房店",294:"潍坊",295:"威海",296:"渭南",297:"文登",298:"温岭",299:"温州",300:"乌海",301:"武汉",302:"芜湖",303:"吴江",304:"乌兰浩特",305:"武威",306:"无锡",307:"梧州",308:"西安",309:"项城",310:"襄樊",311:"香格里拉",312:"象山",313:"湘潭",314:"湘乡",315:"咸宁",316:"仙桃",317:"咸阳",318:"西藏",319:"西昌",320:"邢台",321:"兴义",322:"西宁",323:"新乡",324:"信阳",325:"新余",326:"忻州",327:"宿迁",328:"宿豫",329:"宿州",330:"宣城",331:"许昌",332:"徐州",333:"雅安",334:"牙克石",335:"延安",336:"延边",337:"盐城",338:"阳江",339:"阳泉",340:"扬州",341:"延吉",342:"烟台",343:"兖州",344:"宜宾",345:"宜昌",346:"宜春",347:"伊春",348:"伊犁",349:"银川",350:"营口",351:"鹰潭",352:"伊宁",353:"义乌",354:"宜兴",355:"益阳",356:"永康",357:"永州",358:"岳阳",359:"玉环",360:"榆林",361:"玉林",362:"运城",363:"玉溪",364:"余姚",365:"枣庄",366:"增城",367:"长春",368:"长海",369:"张家港",370:"张家界",371:"张家口",372:"长乐",373:"章丘",374:"长沙",375:"张掖",376:"长治",377:"漳州",378:"湛江",379:"肇东",380:"肇庆",381:"昭通",382:"郑州",383:"镇江",384:"中山",385:"周口",386:"舟山",387:"诸城",388:"珠海",389:"诸暨",390:"驻马店",391:"株洲",392:"淄博",393:"自贡",394:"遵义",395:"乌鲁木齐",396:"福清",397:"鄂州",398:"包头",399:"萧山",400:"宣化",401:"江油",402:"资阳",403:"辛集",404:"佛山",405:"万州",406:"邹城",407:"邵武",408:"姜堰",409:"湘阴",410:"松江",411:"七台河",412:"醴陵",413:"涪陵",414:"公主岭",415:"歙县",416:"兴化",417:"东城",418:"西城",419:"朝阳",420:"海淀",421:"石景山",422:"丰台",423:"顺义",424:"怀柔",425:"密云",426:"延庆",427:"昌平",428:"平谷",429:"门头沟",430:"房山",431:"通州",432:"和平",433:"河西",434:"河东",435:"南开",436:"红桥",437:"河北",438:"武清",439:"徐汇",440:"长宁",441:"普陀",442:"闸北",443:"虹口",444:"杨浦",445:"黄浦",446:"卢湾",447:"静安",448:"宝山",449:"闵行",450:"嘉定",451:"金山",452:"松江",453:"青浦",454:"南汇",455:"奉贤",456:"崇明",457:"万州",458:"涪陵",459:"渝中",460:"大渡口",461:"江北",462:"沙坪坝",463:"九龙坡",464:"南岸",465:"北碚",466:"万盛",467:"双桥",468:"渝北",469:"巴南",470:"黔江",471:"长寿",472:"香港",473:"澳门",474:"台北",475:"基隆",476:"新北",477:"新竹",478:"台中",479:"嘉义",480:"台南",481:"高雄",482:"台中"}}return e}();t.res="0.0.3",e.DataManagers=t,__reflect(t.prototype,"data.DataManagers")}(data||(data={}));var data;!function(e){var t=function(){function e(){}return e}();t.firstComeInGame=1,t.reconnetGame=2,t.goInGame=11,t.sendOperation_ready=1,t.leaveGame=13,t.sendOperation_otherReady=12,t.sendWords=14,t.isCanSPeack=15,t.startVote=16,t.voteResult=17,t.stateSpecialVote=18,t.playerVote=2,t.personClickVote=19,t.jumpMySelfSpeak=3,t.putGameResult=20,t.resetAllPersonData=21,t.offLine=22,t.nextPlayGame=23,t.showPlayerSpeakImg=24,t.hidePlayerSpeakImg=25,t.getPersonNum=14,t.sendPlayWords=26,t.startSendWord=27,t.specialDescribe=28,t.specialTime=29,e.PomeloData=t,__reflect(t.prototype,"data.PomeloData")}(data||(data={}));var Tools=function(){function e(){}return e.getInstance=function(){return this._instance},e.prototype.getUrlAttribute=function(e){var t=location.search.substr(1),a=t.indexOf(e+"=");if(a>-1){var o=t.substring(a);return o.substring((e+"=").length,o.indexOf("&")>-1?o.indexOf("&"):o.length)}return null},e.prototype.isIphone=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1||e.indexOf("iphone")>-1?!0:!1},e.prototype.getStringLen=function(e,t){for(var a=0,o="",i=0;i<e.length;i++){var n=e.charCodeAt(i);if(a+=n>=0&&255>=n?1:2,!(t>a))return o+="...";o+=e[i]}return o},e}();Tools._instance=new Tools,__reflect(Tools.prototype,"Tools");var GameApp=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t,!1),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this);var t=egret.MainContext.deviceType==egret.MainContext.DEVICE_MOBILE?egret.StageScaleMode.FIXED_WIDTH:egret.StageScaleMode.SHOW_ALL;this.stage.scaleMode=t;var a=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",a),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json?bb="+data.DataManagers.res,"resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json?bb="+data.DataManagers.res,this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},t.prototype.onThemeLoadComplete=function(){t.Manager=new Manager(this),t.Manager.start()},t}(egret.DisplayObjectContainer);__reflect(GameApp.prototype,"GameApp");var socketio;!function(e){var t=function(){function t(){this.pomelo=window.pomelo,this.icount=0,this.cl=!1,this.host="123.206.190.223",this.port="3015",this.cltime=0,this.initbo=!1,this.gateConnect=!1,window.ioconnect=this}return t.getInstance=function(){return this._intance},t.prototype.connectError=function(){},t.prototype.initPomelo=function(e,t,a,o,i,n,r){this.fun=n,this.scope=r,this.game_id=e,this.plat_id=t;var s=this;this.pomelo=window.pomelo,this.icount=0,this.pomelo.init({host:this.host,port:this.port,log:!0},function(){s.connectServer(s.host,s.port,{game_id:e,plat_id:t,time:a,sign:o,ticket_cost:i},r)}),clearTimeout(this.timerVar)},t.prototype.connectServer=function(e,t,a,o){var i=this;this.icount=1,i.pomelo.request("connector.entryHandler.entry",a,function(e){if(console.log(e,"res"),200==e.code){clearTimeout(this.timerVar),i.gateConnect=!0,console.log("链接成功：",JSON.parse(e.data));var t=JSON.parse(e.data);GameApp.Manager.dataManager.userData=t.userData;var a=o||this.scope;i.fun&&(i.fun.call(a),i.fun=null),i.connectok(e)}})},t.prototype.disconnect=function(){this.pomelo.disconnect()},t.prototype.connectok=function(e){this.icount=2;var t=this;this.initbo||(this.initbo=!0,this.pomelo.on("onMsg",this.onMessage),this.pomelo.on("error",function(){console.log("error")}),this.pomelo.on("onKick",function(){console.log("onKick")}),this.pomelo.on("close",function(){console.log("close:"+t.cl),this.cltime=0,GameApp.Manager.controllerManager.gameOverController.show(4)}),this.pomelo.on("io-error",function(){console.log("io-error"),GameApp.Manager.controllerManager.gameOverController.show(4)}),this.pomelo.on("heartbeat timeout",function(){console.log("heartbeat timeout");var e=new Date;console.log("heartbeat timeout"+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()),t.cltime=0,t.cl=!0,t.chonglian(),GameApp.Manager.controllerManager.gameOverController.show(4)})),this.cl=!1},t.prototype.chonglian=function(){if(this.cl&&(this.icount=0,console.log("断线重连中"),this.gateConnect=!1,0==this.cltime)){this.cltime=1e3;var a=this;2!=t.getInstance().icount?e.IoConnect.getInstance().initPomelo(GameApp.Manager.dataManager.game_id,GameApp.Manager.dataManager.plat_id,GameApp.Manager.dataManager.time,GameApp.Manager.dataManager.sign,GameApp.Manager.dataManager.ticket_cost,a.fun,a.scope):e.IoConnect.getInstance().chonglian()}},t.prototype.onMessage=function(e,t){void 0===t&&(t=!0),console.log("推送数据",e);var a=JSON.parse(e.data);e.type==data.PomeloData.goInGame&&GameApp.Manager.viewManager.gameMainManager.mainUI.getAllPersonData(a),e.type==data.PomeloData.leaveGame&&GameApp.Manager.viewManager.gameMainManager.mainUI.leaveGame(a),e.type==data.PomeloData.sendOperation_otherReady&&GameApp.Manager.viewManager.gameMainManager.mainUI.goReadyState(a),e.type==data.PomeloData.sendWords&&GameApp.Manager.viewManager.gameMainManager.mainUI.sendWords(a),e.type==data.PomeloData.isCanSPeack&&GameApp.Manager.viewManager.gameMainManager.mainUI.isCanSpeack(a),e.type==data.PomeloData.startVote&&GameApp.Manager.viewManager.gameMainManager.mainUI.stateVote(a),e.type==data.PomeloData.personClickVote&&GameApp.Manager.viewManager.gameMainManager.mainUI.personClickVoteResult(a),e.type==data.PomeloData.voteResult&&GameApp.Manager.viewManager.gameMainManager.mainUI.voteResult(a),e.type==data.PomeloData.stateSpecialVote&&GameApp.Manager.viewManager.gameMainManager.mainUI.stateSpecialVote(a),e.type==data.PomeloData.putGameResult&&GameApp.Manager.viewManager.gameMainManager.mainUI.getGameResult(a),e.type==data.PomeloData.resetAllPersonData&&GameApp.Manager.viewManager.gameMainManager.mainUI.resetAllData(a),e.type==data.PomeloData.offLine&&GameApp.Manager.viewManager.gameMainManager.mainUI.offLine(a),e.type==data.PomeloData.nextPlayGame,e.type==data.PomeloData.showPlayerSpeakImg&&GameApp.Manager.viewManager.gameMainManager.mainUI.playerSpeakImgState(a,1),e.type==data.PomeloData.hidePlayerSpeakImg&&GameApp.Manager.viewManager.gameMainManager.mainUI.playerSpeakImgState(a,2),e.type==data.PomeloData.sendPlayWords&&GameApp.Manager.viewManager.gameMainManager.mainUI.sendUserWords(a),e.type==data.PomeloData.startSendWord&&GameApp.Manager.viewManager.gameMainManager.mainUI.startSendWord(a),e.type==data.PomeloData.specialDescribe&&GameApp.Manager.viewManager.gameMainManager.mainUI.specialDescribe(a),e.type==data.PomeloData.specialTime&&GameApp.Manager.viewManager.gameMainManager.mainUI.specialDescribeAlert(a)},t.prototype.enterGame=function(e,t,a,o){this.pomelo.request("game.gameHandler.enterGame",{type:e,data:JSON.stringify(t)},function(e){a&&a.call(o,e)})},t.prototype.sendOperation=function(e,t,a,o){this.pomelo.request("game.gameHandler.sendOperation",{type:e,data:JSON.stringify(t)},function(e){a&&a.call(o,e)})},t.prototype.chatOperation=function(e,t,a,o){this.pomelo.request("chat.chatHandler.chatOperation",{type:e,data:JSON.stringify(t)},function(e){a&&a.call(o,e)})},t.prototype.sendVoice=function(e,t,a,o){this.pomelo.request("chat.chatHandler.sendVoice",{type:e,data:JSON.stringify(t)},function(e){a&&a.call(o,e)})},t.prototype.sendVoiceEnd=function(e,t,a,o){this.pomelo.request("chat.chatHandler.sendVoiceEnd",{type:e,data:JSON.stringify(t)},function(e){a&&a.call(o,e)})},t.prototype.specialDescribe=function(e,t,a,o){this.pomelo.request("chat.chatHandler.specialDescribe",{type:e,data:JSON.stringify(t)},function(e){a&&a.call(o,e)})},t.prototype.upload=function(e,t,a,o){this.pomelo.request("file.uploadHandler.upload",{type:e,content:JSON.stringify(t)},function(e){a&&a.call(o,e)})},t.prototype.relaveMessage=function(e){},t.prototype.trace=function(e){console.log(e)},t}();t._intance=new t,e.IoConnect=t,__reflect(t.prototype,"socketio.IoConnect")}(socketio||(socketio={}));var JsonpReq=function(){function e(){}return e.process=function(t,a){e.completeCall["call_"+e._regID]=function(a){var o=e._regID;t.data=a,t.dispatchEvent(new egret.Event(egret.Event.COMPLETE)),delete e.completeCall["call_"+o]},e.startLoader(t,e._regID++,a)},e.startLoader=function(e,t,a){var o=document.createElement("script");o.src=e._request.url+"JsonpReq.completeCall.call_"+t+a,document.body.appendChild(o)},e}();JsonpReq._regID=0,JsonpReq.completeCall={},__reflect(JsonpReq.prototype,"JsonpReq");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var controller;!function(e){var t=function(){function e(){this.loader=new loader.LoaderManagers,this.gameMainController=new mainUI.gameMainController,this.gameOverController=new gameOver.GameOverControll,this.lookInfoController=new lookInfo.LookInfoControll}return e.prototype.start=function(){var e=this;this.loader.mainLoading(["public"],function(){socketio.IoConnect.getInstance().initPomelo(GameApp.Manager.dataManager.game_id,GameApp.Manager.dataManager.plat_id,GameApp.Manager.dataManager.time,GameApp.Manager.dataManager.sign,GameApp.Manager.dataManager.ticket_cost,e.pomeloOK,e)},this)},e.prototype.pomeloOK=function(){GameApp.Manager.viewManager.loading.loadingUI.showBtnImg()},e}();e.ControllerManager=t,__reflect(t.prototype,"controller.ControllerManager")}(controller||(controller={}));var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,a,o){function i(e){t.call(o,e)}function n(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),a.call(o))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,a){function o(o){t.call(a,o,e)}if(RES.hasRes(e)){var i=RES.getRes(e);i?o(i):RES.getResAsync(e,o,this)}else RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var gameOver;!function(e){var t=function(t){function a(e){var a=t.call(this,e)||this;return a.loaded=!1,a.viewManager=e,a}return __extends(a,t),a.prototype.show=function(e,t,a,o,i){this.initUI(e,t,a,o,i)},a.prototype.initUI=function(t,a,o,i,n){this.gameOver||(this.gameOver=new e.GameOverUi),this.UIStage.addChild(this.gameOver),this.gameOver.setData(t,a,o,i,n)},a.prototype.hide=function(){this.gameOver&&this.gameOver.parent&&(this.gameOver.parent.removeChild(this.gameOver),this.gameOver.clear())},a.prototype.load_end=function(){this.loaded=!0},a.prototype.loading=function(e){},a}(BaseView);e.GameOverManager=t,__reflect(t.prototype,"gameOver.GameOverManager")}(gameOver||(gameOver={}));var gameOver;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.colseTimeIntval=null,t.fun=null,t.scope=null,t.skinName="src/view/gameOver/GameOver.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lb_civilianWord.fontFamily="Heiti SC",this.lb_undercover.fontFamily="Heiti SC",this.lb_gameOverCutDown.fontFamily="Heiti SC",this.lb_Word.fontFamily="Heiti SC",this.lb_myWord.fontFamily="Heiti SC",this.lb_myWordCutDown.fontFamily="Heiti SC",this.lb_resetVote.fontFamily="Heiti SC",this.lb_voteTime.fontFamily="Heiti SC",this.lb_ciyu.fontFamily="Heiti SC",this.lb_yourWordTime.fontFamily="Heiti SC",this.edit_yourWord.fontFamily="Heiti SC");var e=this;this.img_btn_closeOverPage.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this.colseTimeIntval&&(clearInterval(this.colseTimeIntval),this.colseTimeIntval=null),e.fun&&e.fun.call(e.scope),GameApp.Manager.controllerManager.gameOverController.hide()},this),this.img_btn_myWord.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this.colseTimeIntval&&(clearInterval(this.colseTimeIntval),this.colseTimeIntval=null),GameApp.Manager.controllerManager.gameOverController.hide()},this),this.img_btn_resetVote.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this.colseTimeIntval&&(clearInterval(this.colseTimeIntval),this.colseTimeIntval=null),GameApp.Manager.controllerManager.gameOverController.hide()},this),this.btn_reline.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){e.preventDefault(),GameApp.Manager.controllerManager.gameOverController.hide()},this),this.img_btn_nextGame.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this.colseTimeIntval&&(clearInterval(this.colseTimeIntval),this.colseTimeIntval=null),GameApp.Manager.controllerManager.gameOverController.hide()},this),this.group_over.visible=!1,this.group_myWord.visible=!1,this.group_resetVote.visible=!1,this.group_reOnLine.visible=!1,this.group_nextSpeak.visible=!1,this.group_mySpeak.visible=!1,this.group_over.y=(this.stage.stageHeight-this.group_over.height)/2,this.group_over.x=(this.stage.stageWidth-this.group_over.width)/2,this.group_resetVote.y=(this.stage.stageHeight-this.group_resetVote.height)/2,this.group_resetVote.x=(this.stage.stageWidth-this.group_resetVote.width)/2,this.group_nextSpeak.y=(this.stage.stageHeight-this.group_nextSpeak.height)/2,this.group_nextSpeak.x=(this.stage.stageWidth-this.group_nextSpeak.width)/2},t.prototype.setData=function(e,t,a,o,i){if(this.resetAllGroupState(),0==e){if(a){try{var n=a.civilian?a.civilian:[],r=a.undercover?a.undercover:[],s=a.totalPerson?a.totalPerson:[]}catch(l){}var p=a.win,h=a.winner;this.lb_civilianWord.textFlow=(new egret.HtmlTextParser).parser('<font color="#292929" size="30">平民用词：</font><font color="#f0545e" size="32" bold=true>'+a.civilian_word+"</font>"),this.lb_undercover.textFlow=(new egret.HtmlTextParser).parser('<font color="#292929" size="30">卧底用词：</font><font color="#f0545e" size="32" bold=true>'+a.undercover_word+"</font>"),1==h&&1==p?this.img_gameOverResult.source="end_civilian_sucess":1==h&&-1==p?this.img_gameOverResult.source="end_undercover_failure":2==h&&1==p?this.img_gameOverResult.source="end_undercover_sucess":2==h&&-1==p&&(this.img_gameOverResult.source="end_civilian_failure");for(var g in s){for(var c=0;c<n.length;c++)if(n[c]==g){var m=s[g].plat_id+"",d=m.substr(m.length-1,1),u=GameApp.Manager.dataManager.imgUrl+"/"+d+"/"+m+"/"+m+".jpg",_=new module.BaseCircleImage;_.setData(u,60),this.group_civilian.addChild(_)}for(var f=0;f<r.length;f++)if(r[f]==g){var m=s[g].plat_id+"",d=m.substr(m.length-1,1),u=GameApp.Manager.dataManager.imgUrl+"/"+d+"/"+m+"/"+m+".jpg",_=new module.BaseCircleImage;_.setData(u,60),this.group_undercover.addChild(_)}}a.reward&&null!=a.reward&&(this.group_goldNum.visible=!0,this.lb_goldNum.text="金币+"+a.reward.gold),this.group_over.visible=!0}}else 1==e?(this.lb_myWord.text=t,this.group_myWord.visible=!0):2==e?(this.lb_resetVote.text="玩家 "+t+" 的投票数是相同，请再次描述！",this.group_resetVote.visible=!0):3==e?(this.lb_nextGameWord.text=t,this.group_nextSpeak.visible=!0):4==e?this.group_reOnLine.visible=!0:5==e&&(this.group_mySpeak.visible=!1);o&&(this.fun=o,this.scope=i),4!=e&&this.cutDwonTime(e)},t.prototype.cutDwonTime=function(e){var t=this;this.colseTimeIntval&&(clearInterval(this.colseTimeIntval),this.colseTimeIntval=null);var a;0==e?(a=GameApp.Manager.dataManager.gameOverAccountsTime,t.lb_gameOverCutDown.text="(确定"+a+"s)"):1==e?(a=GameApp.Manager.dataManager.assigningWordsTime,t.lb_myWordCutDown.text="(确定"+a+"s)"):2==e?(a=GameApp.Manager.dataManager.specialWordTime,t.lb_voteTime.text="(确定"+a+"s)"):3==e&&(a=GameApp.Manager.dataManager.stateNextGameTime,t.lb_nextGameTime.text="(确定"+a+"s)"),this.colseTimeIntval=setInterval(function(){a-=1,0==e?t.lb_gameOverCutDown.text="(确定"+a+"s)":1==e?t.lb_myWordCutDown.text="(确定"+a+"s)":2==e?t.lb_voteTime.text="(确定"+a+"s)":3==e&&(t.lb_nextGameTime.text="(确定"+a+"s)"),0>=a&&(clearInterval(t.colseTimeIntval),t.colseTimeIntval=null,GameApp.Manager.controllerManager.gameOverController.hide())},980)},t.prototype.resetAllGroupState=function(){this.group_over.visible=!1,this.group_myWord.visible=!1,this.group_resetVote.visible=!1,this.group_nextSpeak.visible=!1,this.group_reOnLine.visible=!1,this.group_mySpeak.visible=!1},t.prototype.clear=function(){for(this.group_over.visible=!1,this.group_myWord.visible=!1,this.group_resetVote.visible=!1,this.group_goldNum.visible=!1,this.group_reOnLine.visible=!1,this.lb_gameOverCutDown.text="(确认10s)",this.lb_myWordCutDown.text="(确认10s)",this.lb_voteTime.text="(确认5s)",this.lb_voteTime.text="(确定"+GameApp.Manager.dataManager.stateNextGameTime+"s)",this.colseTimeIntval&&(clearInterval(this.colseTimeIntval),this.colseTimeIntval=null);this.group_civilian.numElements>0;){var e=this.group_civilian.getElementAt(this.group_civilian.numElements-1);e.parent&&e.parent.removeChild(e)}for(;this.group_undercover.numElements>0;){var e=this.group_undercover.getElementAt(this.group_undercover.numElements-1);e.parent&&e.parent.removeChild(e)}},t}(eui.Component);e.GameOverUi=t,__reflect(t.prototype,"gameOver.GameOverUi")}(gameOver||(gameOver={}));var mainUI;!function(e){var t=function(t){function a(e){var a=t.call(this,e)||this;return a.viewManager=e,a}return __extends(a,t),a.prototype.show=function(){this.mainUI||(this.mainUI=new e.MainUI),this.BottomUIStage.addChild(this.mainUI);var t=this;socketio.IoConnect.getInstance().enterGame(data.PomeloData.firstComeInGame,{},function(e){if(200==e.code){console.log("enterGame",e);var a=JSON.parse(e.data);GameApp.Manager.dataManager.room_id=a.room_id,t.mainUI.setData(a.users,a.user_num)}},this)},a.prototype.hide=function(){this.mainUI&&this.mainUI.parent&&(this.mainUI.clear(),this.mainUI.parent.removeChild(this.mainUI))},a}(BaseView);e.GameMainManager=t,__reflect(t.prototype,"mainUI.GameMainManager")}(mainUI||(mainUI={}));var mainUI;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.civiliamNum=0,t.converNum=0,t.isMyReady=!1,t.cutDwnTime=null,t.totalPersonData={},t.allVoteResult={},t.stateSpeak=!1,t.my_plate_id="",t.myWords="",t.userCanVote=[],t.skinName="src/view/gameUI/MainUISkin.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lb_youWord.fontFamily="Heiti SC",this.lb_undercoverAndCivilian.fontFamily="Heiti SC",this.lb_ready.fontFamily="Heiti SC"),this.group_loading.alpha=1,egret.Tween.get(this.img_loading,{loop:!0}).to({rotation:360},1e3),this.group_loading.y=(this.stage.stageHeight-this.group_loading.height)/2;this.img_btn_canReady.addEventListener(egret.TouchEvent.TOUCH_TAP,this.readyAc,this)},t.prototype.setData=function(e,t){egret.Tween.get(this.group_loading).to({alpha:0},500),window.gameApp.execute("joinTeam",GameApp.Manager.dataManager.room_id,this.my_plate_id),this.hideGroup(t),this.fillPlayData(e),this.readyFirst(),window.gameApp.userSpeaking_back=this.userSpeaking_back,window.gameApp.userSpeakOver_back=this.userSpeakOver_back,window.userSpeaking_back=window.gameApp.userSpeaking_back,window.IOS_userSpeaking_back=window.gameApp.userSpeaking_back,window.userSpeakOver_back=window.gameApp.userSpeakOver_back,window.IOS_userSpeakOver_back=window.gameApp.userSpeakOver_back},t.prototype.userSpeaking_back=function(e){socketio.IoConnect.getInstance().sendVoice(data.PomeloData.showPlayerSpeakImg,{plat_id:e},function(e){console.log(e)},this)},t.prototype.userSpeakOver_back=function(e){socketio.IoConnect.getInstance().sendVoiceEnd(data.PomeloData.hidePlayerSpeakImg,{plat_id:e},function(e){console.log(e)},this)},t.prototype.fillPlayData=function(e){for(var t in e){var a=new personItem.PersonItem;a.setData(e[t]),this.setItemPos(parseInt(e[t].pos),a);var o=e[t].plat_id;this.totalPersonData[o]=e[t],this.totalPersonData[o].personItem=a}},t.prototype.readyFirst=function(){this.setAllCutDownTime(6),this.hideGroupControll(4)},t.prototype.setItemPos=function(e,t){1==e?this.group_item_1.addChild(t):2==e?this.group_item_2.addChild(t):3==e?this.group_item_3.addChild(t):4==e?this.group_item_4.addChild(t):5==e?this.group_item_5.addChild(t):6==e&&this.group_item_6.addChild(t)},t.prototype.readyAc=function(e){e.stopPropagation();var t=this;t.isMyReady||(t.isMyReady=!0,socketio.IoConnect.getInstance().sendOperation(data.PomeloData.sendOperation_ready,{},function(e){console.log("sendOperation_1_点击准备",e)},this),t.lb_des.text="",t.lb_title.text="等待其他玩家进入...",t.cutDwnTime&&(clearInterval(t.cutDwnTime),t.cutDwnTime=null),this.hideGroupControll(2))
},t.prototype.getAllPersonData=function(e){if(e.room_id==GameApp.Manager.dataManager.room_id&&e.userData.plat_id){var t=!1,a=e.userData.plat_id;if(this.totalPersonData[a]&&(t=!0),!t&&e.userData){var o=new personItem.PersonItem;o.setData(e.userData),this.setItemPos(parseInt(e.userData.pos),o),this.totalPersonData[e.userData.plat_id]=e.userData,this.totalPersonData[a].personItem=o}}},t.prototype.leaveGame=function(e){if(e.room_id==GameApp.Manager.dataManager.room_id&&e.userData)if(e.userData.plat_id==GameApp.Manager.dataManager.userData.plat_id)window.gameApp.execute("quitTeam",e.room_id,e.userData.plat_id),GameApp.Manager.controllerManager.gameMainController.hide(),GameApp.Manager.viewManager.loading.show();else for(var t=this.group_personItem.numElements,a=0;t>a;a++){var o=this.group_personItem.getElementAt(a);if(o.getElementAt(1)){var i=o.getElementAt(1);if(i.plat_id==e.userData.plat_id){i.clear(),i.parent&&i.parent.removeChild(i),delete this.totalPersonData[e.userData.plat_id];break}}}},t.prototype.goReadyState=function(e){if(e.userData&&e.userData.plat_id){var t=e.userData.plat_id;this.totalPersonData[t].personItem.goInReady()}},t.prototype.sendWords=function(e){this.speaking(0),GameApp.Manager.controllerManager.gameOverController.show(1,e.word),this.myWords=e.word,this.setCoverNum(parseInt(e.civilian_num),parseInt(e.undercover_num)),this.lb_youWord.text="我的词语："+e.word,this.hideGroupControll(5);for(var t=this.group_personItem.numElements,a=0;t>a;a++){var o=this.group_personItem.getElementAt(a);if(o.$children.length>1){var i=o.$children[1];i.cancleReady()}}},t.prototype.isCanSpeack=function(e){if(e.plat_id){if(e.plat_id==GameApp.Manager.dataManager.userData.plat_id)this.hideGroupControll(1),this.setAllCutDownTime(1);else{this.hideGroupControll(3),this.setAllCutDownTime(2,e.plat_id)}for(var t in this.totalPersonData)t==e.plat_id&&this.totalPersonData[t].personItem.live&&this.totalPersonData[t].personItem.online?this.totalPersonData[t].personItem.canSpeack():1==this.totalPersonData[t].personItem.group_userSpeaking.visible&&this.totalPersonData[t].personItem.cancaleSpeack()}},t.prototype.stateVote=function(e){var t=!1;for(var a in this.totalPersonData)if(a==GameApp.Manager.dataManager.userData.plat_id&&this.totalPersonData[a].personItem.live&&this.totalPersonData[a].personItem.online){t=!0;break}if(this.userCanVote.length>0){for(var o=0;o<this.userCanVote.length;o++)for(var i in this.totalPersonData)this.userCanVote[o]==this.totalPersonData[i].plat_id&&(this.totalPersonData[i].personItem.cancaleSpeack(),t?i!=GameApp.Manager.dataManager.userData.plat_id&&this.totalPersonData[i].personItem.live&&this.totalPersonData[i].personItem.online&&this.totalPersonData[i].personItem.stateVote():this.totalPersonData[i].personItem.cancelVote());this.userCanVote.length=0}else for(var i in this.totalPersonData)this.totalPersonData[i].personItem.cancaleSpeack(),t?i!=GameApp.Manager.dataManager.userData.plat_id&&this.totalPersonData[i].personItem.live&&this.totalPersonData[i].personItem.online&&this.totalPersonData[i].personItem.stateVote():this.totalPersonData[i].personItem.cancelVote();this.hideGroupControll(2),this.setAllCutDownTime(3)},t.prototype.personClickVoteResult=function(e){if(this.allVoteResult[e.vote_to_id]||(this.allVoteResult[e.vote_to_id]=[]),this.allVoteResult[e.vote_to_id].push(e.vote_from_id),!GameApp.Manager.dataManager.isCanVote)for(var t in this.totalPersonData){this.totalPersonData[t].personItem.cancelVote();for(var a in this.allVoteResult)if(t==a){this.totalPersonData[t].personItem.showListVotePerson(this.allVoteResult[a],this.totalPersonData);break}}},t.prototype.stateSpecialVote=function(e){if(e&&e.users){var t=e.users,a="";this.userCanVote.length=0,this.userCanVote=t;var o=!1;for(var i in this.totalPersonData)if(i==GameApp.Manager.dataManager.userData.plat_id&&this.totalPersonData[i].personItem.live&&this.totalPersonData[i].personItem.online){o=!0;break}if(o){for(var n in this.totalPersonData){this.totalPersonData[n].personItem.cancelVote(),this.totalPersonData[n].personItem.clearData();for(var r=0;r<t.length;r++)t[r]==this.totalPersonData[n].plat_id&&(this.totalPersonData[n]["delete"]=!0)}for(var s in this.totalPersonData)this.totalPersonData[s]["delete"]||this.totalPersonData[s].personItem.clearPersonWord();for(var l=0;l<t.length;l++){var p=t[l];this.totalPersonData[p]&&p!=GameApp.Manager.dataManager.userData.plat_id&&this.totalPersonData[p].personItem.live&&this.totalPersonData[p].personItem.online&&this.totalPersonData[p].personItem.stateVote(),a+=""==a?this.totalPersonData[p].personItem.pos:"，"+this.totalPersonData[p].personItem.pos}}else for(var i in this.totalPersonData)this.totalPersonData[i].personItem.cancelVote();GameApp.Manager.controllerManager.gameOverController.show(2,a),this.hideGroupControll(2),this.setAllCutDownTime(5),GameApp.Manager.dataManager.isCanVote=!0,this.allVoteResult={}}},t.prototype.voteResult=function(e){if(e&&e.users){var t=this;setTimeout(function(){for(var a in t.totalPersonData){for(var o in e.users)e.users[o].plat_id==a&&(1==e.users[o].role?t.civiliamNum-=1:2==e.users[o].role&&(t.converNum-=1),t.setCoverNum(t.civiliamNum,t.converNum),t.totalPersonData[a].personItem.showVoteResult(e.users[o].role),t.totalPersonData[a].personItem.live=!1);t.totalPersonData[a].personItem.clearData(),t.totalPersonData[a].personItem.cancelVote(),t.totalPersonData[a].personItem.hideUersSpeakingImg(),t.totalPersonData[a].personItem.hideListVotePerson(),t.totalPersonData[a].personItem.clearPersonWord()}t.hideGroupControll(2),t.setAllCutDownTime(4),GameApp.Manager.dataManager.isCanVote=!0,t.allVoteResult={}},1500)}},t.prototype.getGameResult=function(e){this.closeSpeakImg(),this.totalPersonData&&(e.totalPerson=this.totalPersonData),GameApp.Manager.controllerManager.gameOverController.show(0,"",e,function(){},this),e.reward&&null!=e.reward?window.gameApp.execute("gameEndAward",e.reward.gold,"0"):window.gameApp.execute("gameEndAward","0","0"),GameApp.Manager.dataManager.isCanVote=!0},t.prototype.resetAllData=function(e){var t=this;t.speaking(0),e&&e.users&&(t.clear(),t.fillPlayData(e.users),t.readyFirst())},t.prototype.offLine=function(e){if(e.room_id==GameApp.Manager.dataManager.room_id&&e.userData){var t=e.userData.plat_id;this.totalPersonData&&e.userData.plat_id&&this.totalPersonData[t]&&(this.totalPersonData[t].personItem.showOffLine(),this.totalPersonData[t].personItem.setPlayerOffLine(),this.totalPersonData[t].personItem.hideUersSpeakingImg())}},t.prototype.nextPlayGame=function(){GameApp.Manager.controllerManager.gameOverController.show(3,"开始本轮发言！")},t.prototype.playerSpeakImgState=function(e,t){if(e.room_id==GameApp.Manager.dataManager.room_id&&e.userData)for(var a=this.group_personItem.numElements,o=0;a>o;o++){var i=this.group_personItem.getElementAt(o);if(i.getElementAt(1)){var n=i.getElementAt(1);if(e.userData.plat_id==n.plat_id){1==t?n.showUserSpeakingImg():n.hideUersSpeakingImg();break}}}},t.prototype.sendUserWords=function(e){if(e.room_id==GameApp.Manager.dataManager.room_id&&e.userData)for(var t=this.group_personItem.numElements,a=e.userData.msg.userSpeakWords,o=0;t>o;o++){var i=this.group_personItem.getElementAt(o);if(i.getElementAt(1)){var n=i.getElementAt(1);if(e.userData.plat_id==n.plat_id){n.sendWords(a);break}}}},t.prototype.startSendWord=function(e){var t=this;if(e.room_id==GameApp.Manager.dataManager.room_id){this.setAllCutDownTime(7);var a=GameApp.Manager.dataManager.userData.plat_id;this.totalPersonData[a].personItem.live&&this.totalPersonData[a].personItem.online?window.showUserSpeak(function(e){var a={plat_id:GameApp.Manager.dataManager.userData.plat_id,userSpeakWords:e,room_id:GameApp.Manager.dataManager.room_id};socketio.IoConnect.getInstance().chatOperation(data.PomeloData.sendPlayWords,a,function(e){},t),t.hideGroupControll(6)},"描述你的词语，求含蓄"):this.totalPersonData[a].personItem.live&&this.totalPersonData[a].personItem.online||(this.setAllCutDownTime(7),this.hideGroupControll(6))}},t.prototype.specialDescribe=function(e){var t=e.users;this.userCanVote.length=0,this.userCanVote=t;for(var a="",o=0;o<t.length;o++){var i=t[o];a+=""==a?this.totalPersonData[i].personItem.pos:"，"+this.totalPersonData[i].personItem.pos}for(var n=0;n<t.length;n++){var r=t[n];if(r==GameApp.Manager.dataManager.userData.plat_id){this.setAllCutDownTime(8,"",a),function(e,t){e.showUserSpeak(function(e){var a={plat_id:GameApp.Manager.dataManager.userData.plat_id,userSpeakWords:e,room_id:GameApp.Manager.dataManager.room_id};socketio.IoConnect.getInstance().specialDescribe(data.PomeloData.sendPlayWords,a,function(e){},t),t.hideGroupControll(6)},"重新描述你的词语，求含蓄")}(window,this);break}this.setAllCutDownTime(8,"",a),this.hideGroupControll(6)}},t.prototype.specialDescribeAlert=function(e){if(e&&e.users){var t=e.users,a="";for(var o in this.totalPersonData)this.totalPersonData[o].personItem.cancelVote(),this.totalPersonData[o].personItem.clearData(),this.totalPersonData[o].personItem.clearPersonWord();for(var i=0;i<t.length;i++){var n=t[i];a+=""==a?this.totalPersonData[n].personItem.pos:"，"+this.totalPersonData[n].personItem.pos}GameApp.Manager.controllerManager.gameOverController.show(2,a),this.hideGroupControll(5),GameApp.Manager.dataManager.isCanVote=!0,this.allVoteResult={}}},t.prototype.speaking=function(e){0==e&&this.stateSpeak?(this.stateSpeak=!1,window.gameApp.execute("userSpeakOver"),this.closeSpeakImg()):1!=e||this.stateSpeak||(this.stateSpeak=!0,window.gameApp.execute("userSpeakBegin"))},t.prototype.closeSpeakImg=function(){var e=GameApp.Manager.dataManager.userData.plat_id;for(var t in this.totalPersonData)if(t==e)break},t.prototype.setCoverNum=function(e,t){this.civiliamNum=e,this.converNum=t,this.civiliamNum<0&&(this.civiliamNum=0),this.civiliamNum>4&&(this.civiliamNum=4),this.converNum<0&&(this.converNum=0),this.converNum>2&&(this.converNum=2),this.lb_undercoverAndCivilian.text=this.converNum+"卧底/"+this.civiliamNum+"平民"},t.prototype.setAllCutDownTime=function(e,t,a){var o=0,i=this;i.cutDwnTime&&(clearInterval(i.cutDwnTime),i.cutDwnTime=null,window.hideSendTime()),1==e||2==e?(o=GameApp.Manager.dataManager.descriptionTime,1==e?i.lb_des.text="用语音描述自己的词语, 求含蓄":i.lb_des.text="注意听他人的描述"):3==e?(o=GameApp.Manager.dataManager.voteTime,i.lb_des.text="怀疑谁是卧底，就投他一票"):4==e?(o=GameApp.Manager.dataManager.voteResultTime,i.lb_des.text=""):5==e?(o=GameApp.Manager.dataManager.spacialVoteTime,i.lb_des.text="怀疑谁是卧底，就投他一票"):6==e?(o=GameApp.Manager.dataManager.readyCutDownTime,i.lb_ready.text=""):7==e?o=GameApp.Manager.dataManager.commonSendWordsTime:8==e&&(o=GameApp.Manager.dataManager.commonSendWordsTime),i.setCutDownWord(e,o,t,a),i.cutDwnTime=setInterval(function(){o-=1,i.setCutDownWord(e,o,t,a),0>=o&&(clearInterval(i.cutDwnTime),i.cutDwnTime=null,i.hideGroupControll(5),7==e&&window.hideSendTime())},1e3)},t.prototype.setCutDownWord=function(e,t,a,o){if(1==e)this.lb_title.textFlow=(new egret.HtmlTextParser).parser('<font color="#f0545e" size="42">‘我’</font><font color="#292929" size="42">的描述(</font><font color="#292929" size="42">'+t+'</font><font color="#292929" size="42">s)</font>');else if(2==e){var i=Tools.getInstance().getStringLen(this.totalPersonData[a].user_name,14);this.lb_title.textFlow=(new egret.HtmlTextParser).parser('<font color="#f0545e" size="42">‘'+i+'’</font><font color="#292929" size="42">的描述(</font><font color="#292929" size="42">'+t+'</font><font color="#292929" size="42">s)</font>')}else 3==e?this.lb_title.text="请投票（"+t+"s）":4==e?this.lb_title.text="投票结果（"+t+"s）":5==e?this.lb_title.text="请投票（"+t+"s）":6==e?this.lb_ready.text="准备（"+t+"s）":7==e?(this.lb_title.text="大家的描述时间（"+t+"s）",window.fillTime(t,this.myWords)):8==e&&(this.lb_title.text=o+"的描述时间（"+t+"s）",window.fillTime(t,this.myWords))},t.prototype.hideGroupControll=function(e){try{this.group_groupControll.visible=!1,this.group_btn_ready.visible=!1,this.showGroupControll(e)}catch(t){alert("切换转太"+t)}},t.prototype.showGroupControll=function(e){1==e?this.group_groupControll.visible=!0:2==e?this.group_groupControll.visible=!0:3==e?(this.group_groupControll.visible=!0,this.group_btn_ready.visible=!0):4==e?(this.group_groupControll.visible=!1,this.group_btn_ready.visible=!0):5==e?(this.group_groupControll.visible=!1,this.group_btn_ready.visible=!1):6==e&&(this.group_groupControll.visible=!0,this.group_btn_ready.visible=!1)},t.prototype.hideGroup=function(e){for(var t=this.group_personItem.numElements,a=0;t>a;a++){var o=this.group_personItem.getElementAt(a);e>a?o.visible=!0:o.visible=!1}},t.prototype.playerList=function(){for(var e=this.group_personItem.numElements,t=0;e>t;t++){var a=this.group_personItem.getElementAt(t);if(a.getElementAt(1)){var o=a.getElementAt(1);o.clear(),o.parent&&o.parent.removeChild(o)}}},t.prototype.resetMainUiData=function(){this.totalPersonData={},this.allVoteResult={},this.userCanVote.length=0,this.lb_ready.text="准备",this.lb_title.text="",this.lb_des.text="",this.lb_youWord.text="你的词语",this.lb_undercoverAndCivilian.text="0卧底/0平民",this.isMyReady=!1,this.civiliamNum=0,this.converNum=0,GameApp.Manager.dataManager.isCanVote=!0},t.prototype.clear=function(){this.playerList(),this.resetMainUiData()},t}(eui.Component);e.MainUI=t,__reflect(t.prototype,"mainUI.MainUI")}(mainUI||(mainUI={}));var loader;!function(e){var t=function(t){function a(e){var a=t.call(this,e)||this;return a.tips={main:"正在加载游戏资源...","public":"正在加载公共资源包..."},a.viewManager=e,a}return __extends(a,t),a.prototype.show=function(){this.loadingUI||(this.loadingUI=new e.MainLoading),this.BottomUIStage.addChild(this.loadingUI)},a.prototype.setProgress=function(e){this.loadingUI&&this.loadingUI.setProgress(e.itemsLoaded,e.itemsTotal)},a.prototype.hide=function(){this.loadingUI&&this.loadingUI.parent&&(this.loadingUI.clear(),this.loadingUI.parent.removeChild(this.loadingUI))},a}(BaseView);e.Loading=t,__reflect(t.prototype,"loader.Loading")}(loader||(loader={}));var loader;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="src/view/loader/MainLoading.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lblText.fontFamily="Heiti SC",this.lblText0.fontFamily="Heiti SC",this.lb_version.fontFamily="Heiti SC"),this.lb_version.text="当前版本："+GameApp.Manager.dataManager.version,this.img_btn_fastPlay.alpha=0,this.img_btn_fastPlay.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameApp.Manager.controllerManager.gameMainController.show(),GameApp.Manager.viewManager.loading.hide()},this,!1),this.img_top_wodiMask=new egret.Shape,this.img_top_wodiMask.graphics.clear(),this.img_top_wodiMask.graphics.beginFill(65280),this.img_top_wodiMask.graphics.drawRoundRect(0,0,180,180,60,60),this.img_top_wodiMask.graphics.endFill(),this.grop_top.addChild(this.img_top_wodiMask),this.img_top_wodi.mask=this.img_top_wodiMask,Tools.getInstance().isIphone()||window.gameApp.execute("gamePageLoadRead")},t.prototype.setProgress=function(e,t){this.lblText.text=""+parseInt(e/t*100+"")+"%"},t.prototype.showBtnImg=function(){var e=this;e.lblText.visible=!1,e.img_btn_fastPlay.alpha=1},t.prototype.resetLoading=function(){this.img_btn_fastPlay.alpha=0,this.lblText.visible=!0},t.prototype.clear=function(){this.img_top_wodiMask=null},t}(eui.Component);e.MainLoading=t,__reflect(t.prototype,"loader.MainLoading")}(loader||(loader={}));var lookInfo;!function(e){var t=function(t){function a(e){var a=t.call(this,e)||this;return a.loaded=!1,a.viewManager=e,a}return __extends(a,t),a.prototype.show=function(e,t,a,o,i){this.initUI(e,t,a,o,i)},a.prototype.initUI=function(t,a,o,i,n){this.lookInfo||(this.lookInfo=new e.LookInfoUi),this.BottomUIStage.addChild(this.lookInfo),this.lookInfo.setData(t,a,o,i,n)},a.prototype.hide=function(){this.lookInfo&&this.lookInfo.parent&&(this.lookInfo.parent.removeChild(this.lookInfo),this.lookInfo.clear())},a.prototype.load_end=function(){this.loaded=!0},a.prototype.loading=function(e){},a}(BaseView);e.LookInfoManager=t,__reflect(t.prototype,"lookInfo.LookInfoManager")}(lookInfo||(lookInfo={}));var lookInfo;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="src/view/lookInfo/LookInfo.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lb_playName.fontFamily="Heiti SC",this.lb_age.fontFamily="Heiti SC",this.lb_pos.fontFamily="Heiti SC",this.lb_gift.fontFamily="Heiti SC",this.lb_add.fontFamily="Heiti SC",this.lb_lookInfo.fontFamily="Heiti SC");var e=this;if(this.grop_total.anchorOffsetX=this.grop_total.width/2,this.grop_total.anchorOffsetY=this.grop_total.height/2,this.grop_total.x=(this.stage.stageWidth-this.grop_total.width)/2+this.grop_total.anchorOffsetX,this.grop_total.y=(this.stage.stageHeight-this.grop_total.height)/2+this.grop_total.anchorOffsetY,this.img_btn_rect.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){egret.Tween.get(this.grop_total).to({scaleX:0,scaleY:0},300,egret.Ease.sineIn).call(function(){GameApp.Manager.controllerManager.lookInfoController.hide()})},this),this.rect_btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){egret.Tween.get(this.grop_total).to({scaleX:0,scaleY:0},300,egret.Ease.sineIn).call(function(){GameApp.Manager.controllerManager.lookInfoController.hide()})},this),this.grop_total.scaleX=0,this.grop_total.scaleY=0,this.rect_btn_sendGift.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){t.stopPropagation(),window.gameApp.execute("sendGift",e.user_id,e.user_name)},this),this.rect_btn_addFriend.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){t.stopPropagation(),window.gameApp.execute("addFriend",e.user_id,e.user_name)},this),this.rect_btn_lookInfo.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){t.stopPropagation(),window.gameApp.execute("toUserInfoAct",e.user_id)},this),Tools.getInstance().isIphone()){this.group_sendGift.visible=!1;var t=this.group_threeTotal.width,a=this.group_addFriend.width,o=(t-2*a)/3;this.group_addFriend.x=o,this.group_lookInfo.x=2*o+a,this.group_threeTotal.visible=!0}else this.group_sendGift.visible=!0,this.group_threeTotal.visible=!0},t.prototype.setData=function(e,t,a,o,i){this.lb_playName.text=a.user_name,this.user_name=a.user_name,this.user_id=a.user_id;var n=new module.BaseCircleImage;n.setData(a.head_img,140),this.group_img.addChild(n),egret.Tween.get(this.grop_total).to({scaleX:1,scaleY:1},300,egret.Ease.sineOut),window.gameApp.getUserInfo_back=this.getUserInfo_back,window.getUserInfo_back=window.gameApp.getUserInfo_back,window.IOS_getUserInfo_back=window.gameApp.getUserInfo_back,window.gameApp.execute("getUserInfo",this.user_id)},t.prototype.getUserInfo_back=function(e){var t=e+"",a=t.substr(0,1),o=t.substr(1,2),i=t.substr(3),n=GameApp.Manager.dataManager.allCity[i]+"";if(GameApp.Manager.viewManager.lookInfoManager.lookInfo.lb_pos.text=n||"未知地区",1==parseInt(a)||0==parseInt(a)?GameApp.Manager.viewManager.lookInfoManager.lookInfo.img_sex.source="lf_man":GameApp.Manager.viewManager.lookInfoManager.lookInfo.img_sex.source="lf_woman",parseInt(o)<10)var r=parseInt(e.substr(2,1));else var r=parseInt(o);GameApp.Manager.viewManager.lookInfoManager.lookInfo.lb_age.text=r+"岁"},t.prototype.clear=function(){egret.Tween.removeTweens(this.grop_total),this.lb_playName.text="",this.lb_age.text="0岁",this.lb_pos.text="未知地区",this.grop_total.scaleX=0,this.grop_total.scaleY=0,this.user_id="",this.user_name="",this.group_img.removeChildren()},t}(eui.Component);e.LookInfoUi=t,__reflect(t.prototype,"lookInfo.LookInfoUi")}(lookInfo||(lookInfo={}));var module;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.anX=0,t.anY=0,t.isAnX=!1,t.img=new eui.Image,t.imgMask=new egret.Shape,t.addChild(t.img),t.addChild(t.imgMask),t.img.mask=t.imgMask,t}return __extends(t,e),t.prototype.setData=function(e,t,a,o,i){this.anX=a,this.anY=o,(a>0||o>0)&&(this.isAnX=!0),this.img.width=t,this.img.height=t,RES.getResByUrl(e,this.load_end,this,RES.ResourceItem.TYPE_IMAGE),this.imgMask.graphics.clear(),this.imgMask.graphics.beginFill(16711680),this.imgMask.graphics.drawCircle(t/2,t/2,t/2),this.imgMask.graphics.endFill()},t.prototype.setBack=function(e,t,a){this.imgK=new egret.Shape,this.imgK.graphics.clear(),this.imgK.graphics.beginFill(t),this.imgK.graphics.drawCircle(e/2,e/2,e/2),this.imgK.graphics.endFill(),this.addChild(this.imgK),a>0&&(this.imgK=new egret.Shape,this.imgK.graphics.clear(),this.imgK.graphics.beginFill(16777215),this.imgK.graphics.drawCircle(e/2,e/2,(e+2*a)/2),this.imgK.graphics.endFill(),this.addChildAt(this.imgK,0)),this.width=e,this.height=e},t.prototype.load_end=function(e){e?this.img.texture=e:this.img.source="notImg",this.isAnX&&(this.img.x=this.img.x-this.img.width/2,this.img.y=this.img.y-this.img.height/2,this.imgMask.x=this.img.x,this.imgMask.y=this.img.y)},t.prototype.clear=function(){this.img.source=null,this.img.x=0,this.img.y=0,this.imgMask.x=0,this.imgMask.x=0,this.imgMask.graphics.clear(),this.anX=0,this.anY=0,this.isAnX=!1,this.imgK&&(this.imgK.graphics.clear(),this.imgK.parent&&this.imgK.parent.removeChild(this.imgK),this.imgK=null),this.backSp&&(this.backSp.graphics.clear(),this.backSp.parent&&this.backSp.parent.removeChild(this.backSp),this.backSp=null)},t}(eui.Group);e.BaseCircleImage=t,__reflect(t.prototype,"module.BaseCircleImage")}(module||(module={}));var personItem;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.isVote=!1,t.pos="",t.live=!0,t.online=!0,t.nt=0,t.nindex=1,t.maxt=0,t.playName="",t.url="",t.skinName="src/view/personItem/PersonItem.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lb_personName.fontFamily="Heiti SC",this.lb_readyed.fontFamily="Heiti SC",this.lb_offLine.fontFamily="Heiti SC",this.lb_playSpeak.fontFamily="Heiti SC");var e=this;this.img_btn_vote.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){t.stopPropagation(),GameApp.Manager.dataManager.isCanVote&&(GameApp.Manager.dataManager.isCanVote=!1,socketio.IoConnect.getInstance().sendOperation(data.PomeloData.playerVote,{target_id:e.plat_id},function(e){console.log("点击投票",e)},this))},this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){if(t.stopPropagation(),e.plat_id!=GameApp.Manager.dataManager.userData.plat_id){var a={user_id:e.plat_id,user_name:e.playName,head_img:e.url};GameApp.Manager.controllerManager.lookInfoController.show(1,"",a)}},this)},t.prototype.setData=function(e){this.plat_id=e.plat_id+"";var t=this.plat_id.substr(this.plat_id.length-1,1),a=GameApp.Manager.dataManager.imgUrl+"/"+t+"/"+this.plat_id+"/"+this.plat_id+".jpg";console.log(a,"---url"),this.url=a,RES.getResByUrl(a,this.load_end,this,RES.ResourceItem.TYPE_IMAGE),this.img_personIndex.source="home_index"+e.pos,this.playName=e.user_name?e.user_name:"*****",this.lb_personName.text=Tools.getInstance().getStringLen(this.playName,14),this.pos=e.pos,this.live=e.live,this.online=e.online,e.readyState?this.goInReady():this.cancleReady(),egret.Ticker.getInstance().register(this.tx,this)},t.prototype.sendWords=function(e){var t=this;this.personWords&&this.personWords.parent&&this.personWords.parent.removeChild(this.personWords),this.personWords=new personSpeakWords.PersonSpeakWords,this.personWords.fillWord(e),t.addChild(this.personWords),this.personWords.y=35,this.personWords.x=t.width-170,this.personWords.group_message.scaleX=0,this.personWords.group_message.scaleY=0,egret.Tween.get(this.personWords.group_message).to({scaleX:1,scaleY:1},500,egret.Ease.sineInOut)},t.prototype.load_end=function(e){e?this.img_personImg.source=e:this.img_personImg.source="home_json.notImg"},t.prototype.tx=function(e){this.nt+=e,this.nt>=this.maxt&&(this.nt=0,this.nindex++,this.img_personSpeack.source="s_"+this.nindex,3==this.nindex&&(this.nindex=0,this.maxt=300))},t.prototype.clearPersonWord=function(){this.personWords&&this.personWords.parent&&(this.personWords.clearWods(),this.personWords.parent.removeChild(this.personWords))},t.prototype.goInReady=function(){this.group_reayed.visible=!0},t.prototype.cancleReady=function(){this.group_reayed.visible=!1},t.prototype.canSpeack=function(){this.group_userSpeaking.visible=!0},t.prototype.cancaleSpeack=function(){this.group_userSpeaking.visible=!1},t.prototype.stateVote=function(){this.img_btn_vote.visible=!0},t.prototype.cancelVote=function(){this.img_btn_vote.visible=!1},t.prototype.showVoteResult=function(e){1==e?this.img_voteResult.source="home_civilian":this.img_voteResult.source="home_undercover",this.group_voteResult.visible=!0},t.prototype.hideVoteResult=function(){this.group_voteResult.visible=!1},t.prototype.showListVotePerson=function(e,t){this.clearData();for(var a=0;a<e.length;a++){var o=e[a]+"",i=o.substr(o.length-1,1),n=GameApp.Manager.dataManager.imgUrl+"/"+i+"/"+o+"/"+o+".jpg",r=new module.BaseCircleImage;r.setData(n,30),this.group_voteListPerson.addChild(r)}this.group_voteListPerson.visible=!0},t.prototype.hideListVotePerson=function(){this.group_voteListPerson.visible=!1},t.prototype.showOffLine=function(){this.group_offLine.visible=!0},t.prototype.hideOffLine=function(){this.group_offLine.visible=!1},t.prototype.showUserSpeakingImg=function(){this.img_personSpeack.visible=!0},t.prototype.hideUersSpeakingImg=function(){this.img_personSpeack.visible=!1},t.prototype.setPlayerOffLine=function(){this.online=!1},t.prototype.getPlayerOffLine=function(){return this.online},t.prototype.clear=function(){this.isVote=!1,this.clearData(),this.clearPersonWord(),this.hideUersSpeakingImg(),this.img_personImg.source=null,this.lb_personName.text="",this.hideListVotePerson(),this.maxt=0,this.nt=0,this.nindex=0,egret.Ticker.getInstance().unregister(this.tx,this)},t.prototype.clearData=function(){for(;this.group_voteListPerson.numElements>0;){var e=this.group_voteListPerson.getElementAt(this.group_voteListPerson.numElements-1);e.parent&&e.parent.removeChild(e)}},t}(eui.Component);e.PersonItem=t,__reflect(t.prototype,"personItem.PersonItem")}(personItem||(personItem={}));var personSpeakWords;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="src/view/personSpeakWords/PersonSpeakWords.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){Tools.getInstance().isIphone()&&(this.lb_message.fontFamily="Heiti SC")},t.prototype.fillWord=function(e){this.lb_message.text=e;var t=this;setTimeout(function(){var e=t.group_messageContainer.height;t.img_downArrow.y=e-4,t.group_message.anchorOffsetX=t.group_message.width/2,t.group_message.anchorOffsetY=t.group_message.height+5},5)},t.prototype.clearWods=function(){this.lb_message.text=""},t}(eui.Component);e.PersonSpeakWords=t,__reflect(t.prototype,"personSpeakWords.PersonSpeakWords")}(personSpeakWords||(personSpeakWords={}));var view;!function(e){var t=function(){function e(e){this.manager=e,this.initView(),this.loading=new loader.Loading(this),this.gameMainManager=new mainUI.GameMainManager(this),this.gameOverUiManager=new gameOver.GameOverManager(this),this.lookInfoManager=new lookInfo.LookInfoManager(this)}return e.prototype.initView=function(){this.UIStage=new eui.UILayer,this.BottomUIStage=new eui.Group,this.GameEffect=new eui.Group,this.TopUIStage=new eui.Group,this.UIStage.addChild(this.BottomUIStage),this.UIStage.addChild(this.GameEffect),this.UIStage.addChild(this.TopUIStage),this.manager.stage.addChild(this.UIStage),this.GameEffect.touchChildren=!1,this.GameEffect.touchEnabled=!1},e}();e.ViewManager=t,__reflect(t.prototype,"view.ViewManager")}(view||(view={}));